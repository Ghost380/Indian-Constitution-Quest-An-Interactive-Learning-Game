<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Constitution Keeper - A Time-Travel Adventure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #FF9933;
            --secondary: #138808;
            --accent: #000080;
            --light: #F8F9FA;
            --dark: #212529;
            --correct: #4CAF50;
            --incorrect: #F44336;
            --story-bg: #f9f3e7;
        }
        
        body {
            background-color: #0a0f1e;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100"><circle cx="10" cy="10" r="1" fill="%23ffffff20"/><circle cx="90" cy="30" r="1" fill="%23ffffff20"/><circle cx="40" cy="80" r="1" fill="%23ffffff20"/><circle cx="70" cy="70" r="1" fill="%23ffffff20"/><circle cx="20" cy="50" r="1" fill="%23ffffff20"/></svg>');
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0 30px;
            border-bottom: 3px solid var(--primary);
            margin-bottom: 30px;
            background: linear-gradient(135deg, #1a1f2f 0%, #2a2f3f 100%);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            color: white;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .logo-icon {
            color: var(--primary);
            font-size: 2.8rem;
        }
        
        h1 {
            color: white;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .tagline {
            color: var(--primary);
            font-size: 1.3rem;
            font-weight: 600;
            margin-top: 5px;
        }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 900px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        .main-panel {
            background-color: var(--story-bg);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            overflow: hidden;
            border: 1px solid var(--primary);
        }
        
        .sidebar {
            background-color: #1e2533;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            padding: 25px;
            color: #ddd;
            border: 1px solid var(--accent);
        }
        
        .game-header {
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .game-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .game-stats {
            display: flex;
            gap: 20px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .game-content {
            padding: 30px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            background: #fef9e7;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M10 10 L90 10 L90 90 L10 90 Z" fill="none" stroke="%23ff993330" stroke-width="1"/></svg>');
        }
        
        /* Game States */
        .game-state {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .game-state.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .start-icon {
            font-size: 5rem;
            color: var(--accent);
            margin-bottom: 20px;
        }
        
        .start-screen h2 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 2.2rem;
        }
        
        .start-screen p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #444;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .btn {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 8px rgba(0,0,128,0.3);
        }
        
        .btn:hover {
            background-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255,153,51,0.4);
        }
        
        .btn i {
            font-size: 1.2rem;
        }
        
        /* Story Chapter Screen */
        .story-screen {
            height: 100%;
        }
        
        .chapter-badge {
            background-color: var(--accent);
            color: white;
            display: inline-block;
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        
        .chapter-title {
            font-size: 2.2rem;
            color: var(--accent);
            margin-bottom: 10px;
            font-weight: 700;
            border-left: 5px solid var(--primary);
            padding-left: 15px;
        }
        
        .story-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #333;
            background: rgba(255,255,255,0.7);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .choices-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .choice {
            padding: 18px 20px;
            border: 2px solid #d0b090;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            background: #fff8e7;
        }
        
        .choice:hover {
            border-color: var(--accent);
            background-color: #e6e9ff;
        }
        
        .choice.selected {
            border-color: var(--primary);
            background-color: #fff1d6;
            box-shadow: 0 0 0 2px rgba(255,153,51,0.3);
        }
        
        .choice-letter {
            width: 40px;
            height: 40px;
            background-color: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }
        
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: auto;
        }
        
        .btn-secondary {
            background-color: #6c757d;
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        /* Outcome Screen */
        .outcome-screen {
            text-align: center;
            padding: 30px 20px;
        }
        
        .outcome-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .positive-outcome .outcome-icon {
            color: var(--correct);
        }
        
        .negative-outcome .outcome-icon {
            color: var(--incorrect);
        }
        
        .outcome-title {
            font-size: 2rem;
            margin-bottom: 15px;
        }
        
        .positive-outcome .outcome-title {
            color: var(--correct);
        }
        
        .negative-outcome .outcome-title {
            color: var(--incorrect);
        }
        
        .constitutional-lesson {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 30px;
            background-color: #fff8e7;
            padding: 20px;
            border-radius: 10px;
            text-align: left;
            border-left: 5px solid var(--accent);
        }
        
        .lesson-label {
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Results Screen */
        .results-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .results-icon {
            font-size: 5rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }
        
        .score-display {
            font-size: 4rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        .score-text {
            font-size: 1.4rem;
            margin-bottom: 30px;
            color: #555;
        }
        
        .story-epilogue {
            background-color: #fff8e7;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
            font-style: italic;
            border-left: 5px solid var(--primary);
        }
        
        .badge {
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--secondary), var(--accent));
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 30px;
        }
        
        /* Sidebar Styles */
        .sidebar-title {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .timeline {
            margin-bottom: 30px;
            position: relative;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #334;
        }
        
        .timeline-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #555;
            margin-right: 15px;
            transition: background-color 0.3s;
        }
        
        .timeline-dot.completed {
            background-color: var(--secondary);
            box-shadow: 0 0 10px var(--secondary);
        }
        
        .timeline-dot.current {
            background-color: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }
        
        .timeline-text {
            flex-grow: 1;
            color: #ccc;
        }
        
        .timeline-year {
            font-weight: 700;
            color: var(--primary);
        }
        
        .constitution-fact {
            background-color: #2a2f3f;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--secondary);
            margin-bottom: 20px;
            color: #ddd;
        }
        
        .fact-title {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legacy-meter {
            margin-top: 30px;
        }
        
        .legacy-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            color: #aaa;
        }
        
        .legacy-bar {
            height: 12px;
            background-color: #334;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .legacy-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #aaa;
            font-size: 0.9rem;
            border-top: 1px solid #334;
            margin-top: 20px;
        }
        
        .tricolor {
            height: 5px;
            background: linear-gradient(to right, var(--primary) 33%, white 33%, white 66%, var(--secondary) 66%);
            border-radius: 3px;
            margin-top: 10px;
        }
        
        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
        }
        
        .btn:focus, .choice:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-hourglass-half logo-icon"></i>
                <h1>The Constitution Keeper</h1>
            </div>
            <div class="tagline">A Time-Travel Adventure Through India's Constitutional History</div>
        </header>
        
        <div class="game-container">
            <div class="main-panel">
                <div class="game-header">
                    <div class="game-title">
                        <i class="fas fa-scroll"></i> Chapter <span id="chapter-number">0</span>
                    </div>
                    <div class="game-stats">
                        <div class="stat">
                            <div class="stat-value" id="legacy-score">0</div>
                            <div class="stat-label">Legacy</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="integrity-value">100</div>
                            <div class="stat-label">Integrity</div>
                        </div>
                    </div>
                </div>
                
                <div class="game-content">
                    <!-- Start Screen (Prologue) -->
                    <div class="game-state start-screen active" id="start-screen">
                        <i class="fas fa-clock start-icon"></i>
                        <h2>The Time Council Needs You</h2>
                        <div style="text-align: left; max-width: 700px; margin: 0 auto 30px; background: #f0e6d8; padding: 25px; border-radius: 10px;">
                            <p style="margin-bottom: 15px;"><strong>Year 2147, Time Council Headquarters</strong></p>
                            <p style="margin-bottom: 15px;">A rogue agent has fractured the timeline, threatening to erase the Indian Constitution's core values. You are a Constitution Keeper, sworn to protect the principles of justice, liberty, equality, and fraternity.</p>
                            <p style="margin-bottom: 15px;">Your mission: Travel to pivotal moments in constitutional history, make choices that uphold the Constitution's spirit, and restore the timeline. Your decisions will shape India's future.</p>
                            <p><i class="fas fa-exclamation-triangle" style="color: var(--primary);"></i> Beware: each choice affects your Legacy and Integrity. Protect both to succeed.</p>
                        </div>
                        <button class="btn" id="start-btn">
                            <i class="fas fa-play-circle"></i> Begin Your Journey
                        </button>
                    </div>
                    
                    <!-- Story Chapter Screen -->
                    <div class="game-state story-screen" id="story-screen">
                        <div class="chapter-badge" id="chapter-badge">1946 | Constituent Assembly</div>
                        <h2 class="chapter-title" id="chapter-title">The Birth of Fundamental Rights</h2>
                        <div class="story-text" id="story-text">
                            You arrive in December 1946. The Constituent Assembly is debating the inclusion of Fundamental Rights. Some members argue they are unnecessary; others insist they are the soul of the Constitution. The future of millions hangs on this decision.
                        </div>
                        <div class="choices-container" id="choices-container">
                            <!-- Choices will be dynamically inserted -->
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-secondary" id="council-hint-btn">
                                <i class="fas fa-brain"></i> Consult Time Council
                            </button>
                            <button class="btn" id="make-choice-btn" disabled>
                                <i class="fas fa-check-double"></i> Make Decision
                            </button>
                        </div>
                    </div>
                    
                    <!-- Outcome Screen -->
                    <div class="game-state outcome-screen" id="outcome-screen">
                        <!-- Content dynamically inserted -->
                    </div>
                    
                    <!-- Final Results Screen (Epilogue) -->
                    <div class="game-state results-screen" id="results-screen">
                        <!-- Content dynamically inserted -->
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <h3 class="sidebar-title">Your Journey</h3>
                
                <div class="timeline" id="timeline">
                    <div class="timeline-item" data-chapter="0">
                        <div class="timeline-dot" id="dot-0"></div>
                        <div class="timeline-text"><span class="timeline-year">1946</span> Constituent Assembly</div>
                    </div>
                    <div class="timeline-item" data-chapter="1">
                        <div class="timeline-dot" id="dot-1"></div>
                        <div class="timeline-text"><span class="timeline-year">1950</span> Republic Dawn</div>
                    </div>
                    <div class="timeline-item" data-chapter="2">
                        <div class="timeline-dot" id="dot-2"></div>
                        <div class="timeline-text"><span class="timeline-year">1975</span> Emergency</div>
                    </div>
                    <div class="timeline-item" data-chapter="3">
                        <div class="timeline-dot" id="dot-3"></div>
                        <div class="timeline-text"><span class="timeline-year">1992</span> Mandal Commission</div>
                    </div>
                    <div class="timeline-item" data-chapter="4">
                        <div class="timeline-dot" id="dot-4"></div>
                        <div class="timeline-text"><span class="timeline-year">2002</span> Education for All</div>
                    </div>
                    <div class="timeline-item" data-chapter="5">
                        <div class="timeline-dot" id="dot-5"></div>
                        <div class="timeline-text"><span class="timeline-year">2019</span> Citizenship Debate</div>
                    </div>
                </div>
                
                <div class="constitution-fact">
                    <div class="fact-title">
                        <i class="fas fa-gem"></i> Constitutional Gem
                    </div>
                    <div class="fact-text" id="fact-text">The Preamble was amended only once in 1976 to add the words "Socialist", "Secular", and "Integrity".</div>
                </div>
                
                <div class="legacy-meter">
                    <div class="legacy-label">
                        <span>Legacy Progress</span>
                        <span id="legacy-percent">0%</span>
                    </div>
                    <div class="legacy-bar">
                        <div class="legacy-fill" id="legacy-fill"></div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; font-size: 0.9rem; color: #888;">
                    <i class="fas fa-shield-alt"></i> Integrity: Constitutional values you uphold
                </div>
            </div>
        </div>
        
        <footer>
            <p>The Constitution Keeper - An Interactive Story Game | Learn the Constitution Through Choices</p>
            <div class="tricolor"></div>
        </footer>
    </div>

    <script>
        // Story data: chapters with scenarios and choices
        const storyChapters = [
            {
                year: "1946",
                title: "The Birth of Fundamental Rights",
                story: "You arrive in December 1946. The Constituent Assembly is debating the inclusion of Fundamental Rights. Some members argue they are unnecessary; others insist they are the soul of the Constitution. The future of millions hangs on this decision.",
                choices: [
                    {
                        text: "Support the inclusion of a comprehensive list of Fundamental Rights, enforceable by courts.",
                        outcome: "Excellent choice! The Assembly adopts Fundamental Rights, later becoming Part III of the Constitution. Citizens gain protection against state oppression.",
                        lesson: "Fundamental Rights (Articles 12-35) are justiciable, meaning citizens can approach courts if these rights are violated. They form the bedrock of Indian democracy.",
                        effect: { legacy: 30, integrity: 10 }
                    },
                    {
                        text: "Suggest that Directive Principles are enough; rights can be added later if needed.",
                        outcome: "The Assembly agrees to postpone. Without enforceable rights, early governments face protests and instability. You've weakened the Constitution's moral authority.",
                        lesson: "Fundamental Rights provide immediate legal protection, while Directive Principles are goals. Both are essential, but rights are enforceable.",
                        effect: { legacy: 5, integrity: -15 }
                    },
                    {
                        text: "Propose a middle path: include a few basic rights but leave details to future legislatures.",
                        outcome: "Some rights are included, but ambiguity leads to years of litigation. The Constitution lacks clarity on key freedoms.",
                        lesson: "Clear, well-defined rights prevent confusion and ensure stronger safeguards. The framers wisely chose detail over vagueness.",
                        effect: { legacy: 15, integrity: -5 }
                    }
                ]
            },
            {
                year: "1950",
                title: "The Republic Dawn",
                story: "It's January 26, 1950. India becomes a republic. In a village, you witness upper-caste individuals preventing Dalits from entering a temple. As a Constitution Keeper, how do you respond?",
                choices: [
                    {
                        text: "Invoke Article 17 (abolition of untouchability) and ensure the Dalits' right to enter the temple is upheld.",
                        outcome: "You stand firm on constitutional principles. The villagers learn that untouchability is illegal, and over time, social barriers begin to crumble.",
                        lesson: "Article 17 abolishes untouchability and forbids its practice in any form. It's a revolutionary provision that promotes social equality.",
                        effect: { legacy: 25, integrity: 15 }
                    },
                    {
                        text: "Advise patience; social change takes time. Suggest they worship at home to avoid conflict.",
                        outcome: "The discrimination continues unchecked. Years later, the community remains divided. You've compromised on constitutional morality.",
                        lesson: "The Constitution expects the State and citizens to actively eradicate untouchability, not just wait for change.",
                        effect: { legacy: 0, integrity: -20 }
                    },
                    {
                        text: "Organize a peaceful protest and file a petition in court under Article 32.",
                        outcome: "The court rules in favor of temple entry, setting a precedent. Your action empowers marginalized communities across India.",
                        lesson: "Article 32 guarantees the right to move the Supreme Court for enforcement of Fundamental Rights. Dr. Ambedkar called it the 'heart and soul' of the Constitution.",
                        effect: { legacy: 35, integrity: 10 }
                    }
                ]
            },
            {
                year: "1975",
                title: "The Emergency",
                story: "June 1975. Prime Minister Indira Gandhi has declared a state of emergency. Civil liberties are suspended, and opposition leaders are jailed. You are approached by activists seeking your help. What do you do?",
                choices: [
                    {
                        text: "Support the emergency as necessary for national stability; advise activists to comply.",
                        outcome: "The emergency lasts 21 months, and democracy is weakened. Many innocent people suffer. Your legacy suffers.",
                        lesson: "The Constitution allows emergency provisions but also safeguards fundamental freedoms. The 44th Amendment later ensured that fundamental rights under Articles 20 and 21 cannot be suspended even during emergency.",
                        effect: { legacy: -20, integrity: -30 }
                    },
                    {
                        text: "Quietly help activists by providing legal aid and highlighting abuses through underground networks.",
                        outcome: "Your covert efforts protect some activists. After the emergency ends, you're hailed as a defender of liberty, but your integrity takes a hit due to secrecy.",
                        lesson: "The right to life and personal liberty (Article 21) is inviolable. Even during emergency, some rights remain.",
                        effect: { legacy: 20, integrity: -10 }
                    },
                    {
                        text: "Openly challenge the emergency by filing habeas corpus petitions and organizing public meetings.",
                        outcome: "You face arrest, but your courage inspires others. The Supreme Court later rules that habeas corpus cannot be suspended. Your integrity soars.",
                        lesson: "The famous ADM Jabalpur case (1976) initially upheld suspension, but later judgments restored the primacy of liberty. The Constitution's spirit prevailed.",
                        effect: { legacy: 40, integrity: 20 }
                    }
                ]
            },
            {
                year: "1992",
                title: "The Mandal Commission",
                story: "The government has implemented 27% reservation for OBCs in public employment. Protests erupt across the country. Students argue it's against merit. As a neutral observer, you must advise the Prime Minister.",
                choices: [
                    {
                        text: "Support the reservation, citing Article 16(4) which allows the state to make provisions for backward classes.",
                        outcome: "Reservations are implemented, increasing OBC representation. Some merit concerns remain, but social justice advances.",
                        lesson: "Article 16(4) empowers the state to reserve appointments for backward classes. The Supreme Court upheld 27% reservation in Indra Sawhney case (1992), but added a 'creamy layer' exclusion.",
                        effect: { legacy: 30, integrity: 15 }
                    },
                    {
                        text: "Oppose reservation, arguing that merit should be the sole criterion for government jobs.",
                        outcome: "The policy is diluted. OBCs continue to be underrepresented, and social inequality persists. Your decision favors the privileged.",
                        lesson: "Equality of opportunity (Article 16) includes substantive equality, not just formal equality. Reservations address historical discrimination.",
                        effect: { legacy: -10, integrity: -20 }
                    },
                    {
                        text: "Suggest a compromise: reservation with income-based exclusion (creamy layer) and better educational opportunities.",
                        outcome: "Your balanced approach is accepted. Reservations continue but with safeguards, and more OBC students enter higher education.",
                        lesson: "The Supreme Court later introduced the creamy layer concept to ensure reservations benefit the truly disadvantaged.",
                        effect: { legacy: 25, integrity: 10 }
                    }
                ]
            },
            {
                year: "2002",
                title: "Education for All",
                story: "Parliament is debating the 86th Amendment, which seeks to make education a fundamental right for children aged 6-14. Lobbyists argue it's too expensive; activists say it's essential. Your voice matters.",
                choices: [
                    {
                        text: "Strongly support the amendment; education is the foundation of democracy.",
                        outcome: "Article 21A is inserted, guaranteeing free and compulsory education. Millions of children gain hope. Your legacy shines.",
                        lesson: "The 86th Amendment added Article 21A, making education a fundamental right. It also modified Article 45 to focus on early childhood care.",
                        effect: { legacy: 35, integrity: 15 }
                    },
                    {
                        text: "Oppose it, citing financial burden on states.",
                        outcome: "The amendment fails. Many children remain out of school, and illiteracy persists. Your integrity drops.",
                        lesson: "The Constitution directs the state to provide education. It's not just a cost but an investment in human capital.",
                        effect: { legacy: -15, integrity: -20 }
                    },
                    {
                        text: "Support it but with a phased implementation to ease the financial burden.",
                        outcome: "Education becomes a right but implementation is slow. Some children still wait for schools.",
                        lesson: "While phased approach is practical, the right to education is now recognized as crucial for other rights to be meaningful.",
                        effect: { legacy: 15, integrity: 0 }
                    }
                ]
            },
            {
                year: "2019",
                title: "The Citizenship Debate",
                story: "The Citizenship Amendment Act (CAA) is passed, providing a path to citizenship for non-Muslim minorities from three neighboring countries. Protests erupt, citing violation of secularism. You are asked to mediate.",
                choices: [
                    {
                        text: "Support the act, arguing it protects persecuted minorities.",
                        outcome: "The act is implemented, but secularism is questioned. Minority communities feel anxious. Your decision divides the nation.",
                        lesson: "Article 14 guarantees equality to all persons. Critics argue the act excludes Muslims, potentially violating equality. The debate continues in courts.",
                        effect: { legacy: 10, integrity: -15 }
                    },
                    {
                        text: "Oppose the act, stating it violates the secular character of the Constitution.",
                        outcome: "You stand with protestors advocating secularism. The act faces legal challenges. Your integrity rises, but some see you as partisan.",
                        lesson: "The Preamble declares India a secular nation. Equality before law (Article 14) applies to all, regardless of religion.",
                        effect: { legacy: 20, integrity: 20 }
                    },
                    {
                        text: "Call for a judicial review to test the act's constitutionality.",
                        outcome: "The Supreme Court takes up the case. Meanwhile, you urge peaceful dialogue. Your balanced approach preserves both law and order.",
                        lesson: "Judicial review (Article 13) allows courts to examine laws for constitutionality. It's a key feature of Indian democracy.",
                        effect: { legacy: 25, integrity: 10 }
                    }
                ]
            }
        ];

        // Additional facts
        const constitutionFacts = [
            "The Constitution of India is the longest written constitution of any sovereign country.",
            "The original Constitution had 395 articles in 22 parts and 8 schedules.",
            "The concept of 'Directive Principles' was borrowed from the Irish Constitution.",
            "Dr. B.R. Ambedkar chaired the Drafting Committee.",
            "The Constitution was adopted on 26 November 1949 and came into effect on 26 January 1950.",
            "The Preamble was amended in 1976 to add 'Socialist', 'Secular', and 'Integrity'.",
            "Fundamental Rights can be suspended during a national emergency, except Articles 20 and 21.",
            "The right to constitutional remedies (Article 32) is itself a fundamental right."
        ];

        // Game state
        let currentChapter = 0;
        let legacy = 0;  // score based on historical impact
        let integrity = 100;  // moral standing (can go negative)
        let selectedChoice = null;
        let completedChapters = new Array(storyChapters.length).fill(false);
        
        // DOM elements
        const startScreen = document.getElementById('start-screen');
        const storyScreen = document.getElementById('story-screen');
        const outcomeScreen = document.getElementById('outcome-screen');
        const resultsScreen = document.getElementById('results-screen');
        
        const startBtn = document.getElementById('start-btn');
        const makeChoiceBtn = document.getElementById('make-choice-btn');
        const hintBtn = document.getElementById('council-hint-btn');
        
        const legacyScoreEl = document.getElementById('legacy-score');
        const integrityEl = document.getElementById('integrity-value');
        const chapterNumberEl = document.getElementById('chapter-number');
        const chapterBadge = document.getElementById('chapter-badge');
        const chapterTitle = document.getElementById('chapter-title');
        const storyText = document.getElementById('story-text');
        const choicesContainer = document.getElementById('choices-container');
        
        const legacyPercent = document.getElementById('legacy-percent');
        const legacyFill = document.getElementById('legacy-fill');
        const factText = document.getElementById('fact-text');
        
        // Initialize
        function initGame() {
            currentChapter = 0;
            legacy = 0;
            integrity = 100;
            selectedChoice = null;
            completedChapters.fill(false);
            
            updateStats();
            updateLegacyMeter();
            showRandomFact();
            updateTimeline();
            
            // Set event listeners
            startBtn.addEventListener('click', startJourney);
            makeChoiceBtn.addEventListener('click', submitChoice);
            hintBtn.addEventListener('click', showHint);
        }
        
        // Start the game (from prologue to first chapter)
        function startJourney() {
            startScreen.classList.remove('active');
            storyScreen.classList.add('active');
            loadChapter(0);
        }
        
        // Load a chapter
        function loadChapter(index) {
            const chapter = storyChapters[index];
            currentChapter = index;
            
            chapterNumberEl.textContent = index + 1;
            chapterBadge.textContent = `${chapter.year} | ${chapter.title}`;
            chapterTitle.textContent = chapter.title;
            storyText.textContent = chapter.story;
            
            // Clear previous choices
            choicesContainer.innerHTML = '';
            
            // Create choice elements
            const choiceLetters = ['A', 'B', 'C'];
            chapter.choices.forEach((choice, i) => {
                const choiceEl = document.createElement('div');
                choiceEl.className = 'choice';
                choiceEl.dataset.index = i;
                choiceEl.tabIndex = 0;
                
                choiceEl.innerHTML = `
                    <div class="choice-letter">${choiceLetters[i]}</div>
                    <div class="choice-text">${choice.text}</div>
                `;
                
                choiceEl.addEventListener('click', () => selectChoice(choiceEl, i));
                choiceEl.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        selectChoice(choiceEl, i);
                    }
                });
                choicesContainer.appendChild(choiceEl);
            });
            
            // Reset selection
            selectedChoice = null;
            makeChoiceBtn.disabled = true;
            
            // Mark timeline current
            updateTimeline();
        }
        
        // Select a choice
        function selectChoice(choiceEl, index) {
            document.querySelectorAll('.choice').forEach(ch => ch.classList.remove('selected'));
            choiceEl.classList.add('selected');
            selectedChoice = index;
            makeChoiceBtn.disabled = false;
        }
        
        // Submit choice and show outcome
        function submitChoice() {
            if (selectedChoice === null) return;
            
            const chapter = storyChapters[currentChapter];
            const choice = chapter.choices[selectedChoice];
            
            // Apply effects
            legacy += choice.effect.legacy;
            integrity += choice.effect.integrity;
            // Ensure integrity doesn't go below 0 or above 100? But it's not bounded in story, just visual.
            
            // Mark chapter completed
            completedChapters[currentChapter] = true;
            
            // Show outcome screen
            storyScreen.classList.remove('active');
            outcomeScreen.classList.add('active');
            
            // Determine outcome class
            const outcomeClass = choice.effect.legacy > 20 ? 'positive-outcome' : 
                                 (choice.effect.legacy < 0 ? 'negative-outcome' : '');
            
            outcomeScreen.innerHTML = `
                <div class="${outcomeClass}">
                    <div class="outcome-icon">
                        <i class="fas ${choice.effect.legacy > 20 ? 'fa-star' : (choice.effect.legacy < 0 ? 'fa-exclamation-triangle' : 'fa-balance-scale')}"></i>
                    </div>
                    <h2 class="outcome-title">${choice.effect.legacy > 20 ? 'Constitution Upheld' : (choice.effect.legacy < 0 ? 'Constitution Weakened' : 'A Nuanced Outcome')}</h2>
                    <div class="constitutional-lesson">
                        <div class="lesson-label"><i class="fas fa-scroll"></i> Historical Consequence</div>
                        <p>${choice.outcome}</p>
                        <div class="lesson-label" style="margin-top:15px;"><i class="fas fa-gavel"></i> Constitutional Lesson</div>
                        <p>${choice.lesson}</p>
                    </div>
                    <button class="btn" id="continue-btn">
                        <i class="fas fa-arrow-right"></i> ${currentChapter < storyChapters.length - 1 ? 'Continue Journey' : 'See Epilogue'}
                    </button>
                </div>
            `;
            
            // Update stats and legacy meter
            updateStats();
            updateLegacyMeter();
            updateTimeline();
            
            // Add event to continue button
            document.getElementById('continue-btn').addEventListener('click', continueJourney);
        }
        
        // Continue to next chapter or results
        function continueJourney() {
            outcomeScreen.classList.remove('active');
            
            if (currentChapter < storyChapters.length - 1) {
                // Next chapter
                storyScreen.classList.add('active');
                loadChapter(currentChapter + 1);
            } else {
                // Show epilogue (results)
                showEpilogue();
            }
        }
        
        // Show epilogue
        function showEpilogue() {
            resultsScreen.classList.add('active');
            
            // Determine ending based on legacy and integrity
            let ending = "";
            let badge = "";
            if (legacy >= 150 && integrity >= 100) {
                ending = "You have become a legendary Constitution Keeper. The timeline is restored, and India's constitutional values shine brighter than ever. The Time Council honors you with the 'Guardian of Dharma' award.";
                badge = "Guardian of Dharma";
            } else if (legacy >= 100 && integrity >= 70) {
                ending = "Your journey was successful. India remains a vibrant democracy, though some shadows linger. You are remembered as a wise Keeper.";
                badge = "Wise Keeper";
            } else if (legacy >= 50 || integrity >= 50) {
                ending = "The timeline is stable, but your choices were sometimes cautious. The Constitution survives, but its full potential remains untapped. You did your duty, if not more.";
                badge = "Dutiful Keeper";
            } else {
                ending = "The timeline is fractured. Authoritarianism and inequality rise. The Constitution you tried to protect is a shadow of its former self. The Time Council mourns your failure.";
                badge = "Failed Keeper";
            }
            
            resultsScreen.innerHTML = `
                <i class="fas fa-hourglass-end results-icon"></i>
                <div class="score-display">${legacy}</div>
                <div class="score-text">Legacy Score</div>
                <div class="badge">${badge}</div>
                <div class="story-epilogue">
                    <p><strong>Epilogue:</strong> ${ending}</p>
                </div>
                <button class="btn" id="restart-btn">
                    <i class="fas fa-redo-alt"></i> Begin Anew
                </button>
            `;
            
            document.getElementById('restart-btn').addEventListener('click', restartGame);
        }
        
        // Restart game
        function restartGame() {
            resultsScreen.classList.remove('active');
            startScreen.classList.add('active');
            initGame();
        }
        
        // Show hint (random constitutional fact)
        function showHint() {
            const randomFact = constitutionFacts[Math.floor(Math.random() * constitutionFacts.length)];
            alert("ðŸ“œ Time Council Advice:\n" + randomFact);
            // Minor cost: reduce integrity slightly for using external help
            integrity = Math.max(0, integrity - 5);
            updateStats();
        }
        
        // Update stats display
        function updateStats() {
            legacyScoreEl.textContent = legacy;
            integrityEl.textContent = integrity;
        }
        
        // Update legacy meter
        function updateLegacyMeter() {
            // Max legacy possible from chapters: sum of max legacy per chapter (approx 35 each * 6 = 210)
            const maxLegacy = 210; // rough max
            const percent = Math.min(100, Math.round((legacy / maxLegacy) * 100));
            legacyFill.style.width = percent + '%';
            legacyPercent.textContent = percent + '%';
        }
        
        // Update timeline dots
        function updateTimeline() {
            for (let i = 0; i < storyChapters.length; i++) {
                const dot = document.getElementById(`dot-${i}`);
                if (dot) {
                    dot.classList.remove('completed', 'current');
                    if (completedChapters[i]) {
                        dot.classList.add('completed');
                    } else if (i === currentChapter && storyScreen.classList.contains('active')) {
                        dot.classList.add('current');
                    }
                }
            }
        }
        
        // Show random fact in sidebar
        function showRandomFact() {
            const randomIndex = Math.floor(Math.random() * constitutionFacts.length);
            factText.textContent = constitutionFacts[randomIndex];
            setTimeout(showRandomFact, 15000);
        }
        
        // Keyboard navigation
        function handleKeyDown(e) {
            if (storyScreen.classList.contains('active')) {
                if (e.key >= '1' && e.key <= '3') {
                    const index = parseInt(e.key) - 1;
                    const choices = document.querySelectorAll('.choice');
                    if (choices[index]) {
                        selectChoice(choices[index], index);
                    }
                } else if (e.key === 'Enter' && !makeChoiceBtn.disabled) {
                    submitChoice();
                } else if (e.key === 'h' || e.key === 'H') {
                    showHint();
                }
            } else if (outcomeScreen.classList.contains('active')) {
                if (e.key === 'Enter') {
                    document.getElementById('continue-btn')?.click();
                }
            } else if (resultsScreen.classList.contains('active')) {
                if (e.key === 'Enter') {
                    document.getElementById('restart-btn')?.click();
                }
            } else if (startScreen.classList.contains('active')) {
                if (e.key === 'Enter') {
                    startBtn.click();
                }
            }
        }
        
        document.addEventListener('keydown', handleKeyDown);
        
        // Start
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
